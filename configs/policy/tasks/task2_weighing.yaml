# ==================== ä»»åŠ¡2ï¼šå¿«é€’è¢‹ç§°é‡ ====================

# ä»»åŠ¡åŸºæœ¬ä¿¡æ¯
task:
  id: 2
  name: 'weighing'
  stage: 2 # Stage 2: ä»ä»»åŠ¡1æ¨¡å‹ç»§ç»­

  # ä»»åŠ¡æè¿°ï¼ˆä¸­æ–‡ï¼‰
  description: 'æœºå™¨äººä»ç§»åŠ¨çš„ä¼ é€å¸¦ä¸Šæ‹¾å–å¿«é€’è¢‹ï¼Œå…ˆæ”¾ç½®åœ¨ç”µå­ç§¤ä¸Šå®Œæˆç§°é‡ï¼Œéšåå†æ¬¡æ‹¾èµ·å¹¶æ”¾å…¥æŒ‡å®šæ”¶çº³ç­ä¸­'

  # Language Instructionï¼ˆè‹±æ–‡ï¼‰
  language_instruction: 'Pick up the package from the conveyor belt, weigh it on the electronic scale, then pick it up again and place it in the designated storage container'

  # æ•°æ®é…ç½®
  data:
    root: '/root/robot/data/task2/data/lerobot/1-400/'
    repoid: 'lerobot/task2_weighing'
    episodes_to_use: [0, 199]

  # è®­ç»ƒé…ç½®
  training:
    max_epoch: 25 # ä»»åŠ¡2å¯èƒ½éœ€è¦æ›´å¤šepochsï¼ˆç§°é‡åŠ¨ä½œæ›´å¤æ‚ï¼‰

    # Stage 2: ä»ä»»åŠ¡1çš„æœ€ä½³checkpointç»§ç»­
    # æ ¼å¼: outputs/train/{task}/{method}/run_{timestamp}/best
    # éœ€è¦æ‰‹åŠ¨æŒ‡å®šä»»åŠ¡1çš„timestampï¼
    resume_from: 'task'
    resume_task_id: 1
    resume_path: 'outputs/train/task1_moving_grasp/smolvla_sequential/run_XXXXXX_XXXXXX/best' # ä¿®æ”¹XXXXXXä¸ºå®é™…timestamp

    # é™ä½å­¦ä¹ ç‡ï¼ˆé˜²é—å¿˜ç­–ç•¥ï¼‰
    policy:
      optimizer_lr: 3.5e-5 # é™ä½çº¦30%è‡³3.5e-5ï¼Œä¿æŠ¤ä»»åŠ¡1çŸ¥è¯†
      # åˆ†å±‚å­¦ä¹ ç‡
      vision_encoder_lr: 3e-6 # è¿›ä¸€æ­¥é™ä½è§†è§‰ç¼–ç å™¨å­¦ä¹ ç‡ï¼ˆä»5e-6é™åˆ°3e-6ï¼‰
      expert_lr: 1.5e-5 # é™ä½Action Expertå­¦ä¹ ç‡ï¼ˆä»2e-5é™åˆ°1.5e-5ï¼‰
      scheduler_warmup_steps: 800 # æ¨¡å‹å·²ç»warmï¼Œä½†ä»éœ€é€‚åº”
      scheduler_decay_steps: 20000 # å»¶é•¿decay

      # ğŸ†• ä»»åŠ¡2æ¨èçš„è§†è§‰å±‚å†»ç»“ç­–ç•¥ï¼ˆæ›´ä¿å®ˆï¼‰
      # ç›®æ ‡ï¼šé€‚åº”ç§°é‡ä»»åŠ¡ï¼ŒåŒæ—¶é˜²æ­¢é—å¿˜ä»»åŠ¡1
      # ç­–ç•¥ï¼šå†»ç»“æ›´å¤šå±‚ï¼Œåªè§£å†»æœ€å7å±‚
      unfreeze_vision_layers: [-1, -2, -3, -4, -5, -6, -7] # è§£å†» Layer 20-26

      # ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªç­–ç•¥ï¼Ÿ
      # 1. é¡ºåºå­¦ä¹ çš„ç¬¬2ä¸ªä»»åŠ¡ï¼Œéœ€è¦ä¿æŠ¤ä»»åŠ¡1çš„çŸ¥è¯†
      # 2. ç§°é‡ä»»åŠ¡çš„è§†è§‰ç†è§£ä¸ä»»åŠ¡1ç±»ä¼¼ï¼ˆç‰©ä½“è¯†åˆ«+ä½ç½®ï¼‰
      # 3. åªè§£å†»æœ€é«˜å±‚æ¥é€‚åº”"ç”µå­ç§¤"å’Œ"æ”¶çº³ç­"è¿™äº›æ–°ç‰©ä½“
      # 4. æ›´ä¿å®ˆçš„ç­–ç•¥å¯ä»¥å‡å°‘ç¾éš¾æ€§é—å¿˜

      # å¦‚æœé—å¿˜ä¸¥é‡ï¼Œå¯ä»¥æ›´ä¿å®ˆ: unfreeze_vision_layers: [-1, -2, -3, -4, -5]
      # å¦‚æœéœ€è¦æ›´å¥½é€‚åº”æ–°ä»»åŠ¡: unfreeze_vision_layers: [-1, -2, -3, -4, -5, -6, -7, -8, -9]

  # Replayé…ç½®ï¼ˆé˜²é—å¿˜çš„å…³é”®ï¼‰
  replay:
    task1_episodes: 40 # ä»ä»»åŠ¡1å›æ”¾40ä¸ªepisodesï¼ˆçº¦20%ï¼‰
