# ==================== 任务1：移动目标抓取 ====================

# 任务基本信息
task:
  id: 1
  name: 'moving_grasp'
  stage: 1 # Stage 1: 从预训练模型开始

  description: '机器人从移动的传送带上抓取物体，放置于桌面第一个目标位置后，再将其拿起至第二个目标位置'

  # Language Instruction（英文，SmolVLA使用）
  # 这个instruction会在每个batch中作为任务条件输入模型
  # 优化版本：强调四个关键步骤和中心对齐约束
  language_instruction: 'Step 1: Track and grasp the moving object from the conveyor belt with stable grip at object center. Step 2: Place the object precisely at the CENTER of the first colored target block on the table - ensure object center aligns exactly with target center, avoid edge placement. Step 3: Re-grasp the object securely from the first target position. Step 4: Place the object precisely at the CENTER of the second colored target block - maintain exact center-to-center alignment throughout placement. Critical: All placements must achieve center alignment, not edge or corner placement.'

  # 数据配置
  data:
    root: '/root/robot/data/task-1/1-2000/lerobot/'
    # root: '/mnt/e/robot/data/data/task1/lerobot/1-400/'
    repoid: 'lerobot/task1_moving_grasp'
    episodes_to_use: [0, 199]

  # 训练配置
  training:
    max_epoch: 150 # 解锁VLM后需要更多训练时间

    # Stage 1: 从HuggingFace预训练SmolVLA开始
    resume_from: 'pretrained'
    pretrained_path: 'lerobot/smolvla_base' # 使用镜像源下载的预训练模型

    # 优化器配置（分层学习率）
    policy:
      # 基础学习率（用于其他模块）
      optimizer_lr: 1e-5 # 降低基础学习率，避免快速拟合轨迹
      # 分层学习率
      vision_encoder_lr: 5e-6 # 视觉编码器低学习率
      expert_lr: 2e-5 # Action Expert高学习率
      # 调度器
      scheduler_warmup_steps: 3000 # 更长warmup
      scheduler_decay_steps: 35000 # 更长衰减周期
# 任务1没有replay配置（因为是第一个任务）
